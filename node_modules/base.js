/*
var BASE2  = "01";
var BASE8  = "01234567";
var BASE10 = "0123456789";
var BASE16 = "0123456789abcdef";
var BASE32 = "0123456789abcdefghijklmnopqrstuvwxyz";
var BASE62 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
var BASE75 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!=-*(){}[]";
*/

var base = function( src, srctable, desttable ){
	src = src.toString();
	
	var srclen = srctable.length,
		destlen = desttable.length,
		val = 0,
		numlen = src.length;
	
	// first convert to base 10
	for( var i = 0; i < numlen; i ++ ){
		val = val * srclen + srctable.indexOf( src.charAt(i) );
	}
	
	if( val < 0 ){
		return 0;
	}
	
	// then covert to any base
	var r = val % destlen;
	var res = desttable.charAt(r);
	var q = Math.floor(val / destlen);
	while( q ){
		r = q % destlen;
		q = Math.floor(q / destlen);
		res = desttable.charAt(r) + res;
	}
	
	return res;
}

exports = module.exports = base;